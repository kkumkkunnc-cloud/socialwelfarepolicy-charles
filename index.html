<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>사회복지정책론 온라인 퀴즈 (100선)</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Noto Sans KR -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .option-button.selected.correct { background-color:#dcfce7; border-color:#22c55e; font-weight:700; }
        .option-button.selected.incorrect { background-color:#fee2e2; border-color:#ef4444; font-weight:700; }
        .option-button.reveal-correct { background-color:#dcfce7; border-color:#22c55e; }
        .question-text,.explanation-text,.option-text { white-space:pre-wrap; }
        .option-text { display:block; }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container max-w-4xl mx-auto p-4 sm:p-8">
        <header class="bg-white shadow-lg rounded-lg p-6 mb-8">
            <h1 class="text-3xl font-bold text-center text-blue-800">사회복지정책론 예상문제 100선</h1>
            <p class="text-center text-gray-600 mt-2">6강 ~ 15강 범위</p>
            <div id="scoreboard" class="text-center mt-6 p-4 bg-blue-50 rounded-lg">
                <span class="text-2xl font-bold text-blue-700" id="score-text">0 / 100</span>
                <p class="text-sm text-gray-500 mt-1">맞춘 문제 수</p>
            </div>
            <div class="flex flex-col sm:flex-row justify-center gap-4 mt-6">
                <button id="reset-button" class="w-full sm:w-auto bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded-lg transition-colors">퀴즈 초기화</button>
                <button id="reveal-button" class="w-full sm:w-auto bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-6 rounded-lg transition-colors">전체 정답 및 해설 보기</button>
            </div>
        </header>

        <main id="quiz-container"></main>
    </div>

    <script>
        // --- 퀴즈 데이터 ---
        const lectureHeaders = {
            1:"제6강: 사회복지정책 의제 및 대안의 형성 (Q1 ~ Q10)",
            11:"제7강: 사회복지정책의 결정, 집행, 평가 (Q11 ~ Q20)",
            21:"제8강: 사회복지정책의 재원 및 경제적 효과 (Q21 ~ Q30)",
            31:"제9강: 사회복지정책의 설계: 할당과 급여 (Q31 ~ Q40)",
            41:"제10강: 사회적 위험과 사회보장 체계 (Q41 ~ Q50)",
            51:"제11강: 빈곤과 사회보장 (Q51 ~ Q60)",
            61:"제12강: 5대 사회보험의 이해 (Q61 ~ Q70)",
            71:"제13강: 사회서비스의 개념과 전달체계 (Q71 ~ Q80)",
            81:"제14강: 한국 사회복지정책의 역사와 현황 (Q81 ~ Q90)",
            91:"제15강: 사회복지정책의 실천과 사회운동 (Q91 ~ Q100)"
        };

        // ⬇️ 질문 1~100은 그대로 유지 (생략)
        const quizData = [/* ...당신이 준 1~100 데이터 그대로... */];

        // --- 상태 & 엘리먼트 ---
        let score = 0;
        let answeredQuestions = new Set();
        const totalQuestions = quizData.length;

        const quizContainer = document.getElementById('quiz-container');
        const scoreText = document.getElementById('score-text');
        const resetButton = document.getElementById('reset-button');
        const revealButton = document.getElementById('reveal-button');

        // --- 렌더링 ---
        function renderQuiz() {
            quizContainer.innerHTML = '';
            score = 0;
            answeredQuestions.clear();
            updateScoreboard();

            let html = '';
            quizData.forEach(q => {
                if (lectureHeaders[q.id]) {
                    html += `<h2 class="text-2xl font-bold text-gray-700 mt-10 mb-4 pb-2 border-b-2 border-blue-200">${lectureHeaders[q.id]}</h2>`;
                }
                const optionsHTML = q.options.map((opt, i) => `
                    <button class="option-button w-full text-left p-3 mb-2 rounded-md border border-gray-300 hover:bg-gray-50 transition-colors"
                            data-question-id="${q.id}" data-option-index="${i}">
                        <span class="font-semibold mr-2">${i+1}.</span>
                        <span class="option-text">${opt}</span>
                    </button>
                `).join('');

                html += `
                    <div id="card-Q${q.id}" class="bg-white shadow-lg rounded-lg p-6 mb-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">
                            Q${q.id}. <span class="font-medium question-text">${q.question}</span>
                        </h3>
                        <div class="options-container" data-question-id="${q.id}">
                            ${optionsHTML}
                        </div>
                        <div id="explanation-Q${q.id}" class="hidden mt-4 p-4 border-t border-gray-200">
                            <h4 id="result-Q${q.id}" class="text-xl font-bold mb-2"></h4>
                            <p class="text-gray-700"><span class="font-semibold">정답:</span> ${q.answer}번</p>
                            <p class="text-gray-700 mt-2 explanation-text"><span class="font-semibold">해설:</span> ${q.explanation}</p>
                        </div>
                    </div>`;
            });
            quizContainer.innerHTML = html;
        }

        // --- 정답 처리 ---
        function handleAnswerClick(event) {
            const clickedButton = event.target.closest('.option-button');
            if (!clickedButton) return;

            const questionId = Number(clickedButton.dataset.questionId);
            const selectedOptionIndex = Number(clickedButton.dataset.optionIndex);
            if (Number.isNaN(questionId) || Number.isNaN(selectedOptionIndex)) return;

            if (answeredQuestions.has(questionId)) return;
            answeredQuestions.add(questionId);

            const questionData = quizData.find(q => q.id === questionId);
            if (!questionData) return;

            const isCorrect = (selectedOptionIndex + 1) === questionData.answer;

            const parentCard = document.getElementById(`card-Q${questionId}`);
            if (!parentCard) return;

            const optionsContainer = parentCard.querySelector('.options-container');
            if (!optionsContainer) return;

            const allOptionButtons = optionsContainer.querySelectorAll('.option-button');

            const explanationBox = parentCard.querySelector(`#explanation-Q${questionId}`);
            const resultText = parentCard.querySelector(`#result-Q${questionId}`);
            if (!explanationBox || !resultText) return;

            allOptionButtons.forEach(btn => { btn.disabled = true; });

            if (isCorrect) {
                clickedButton.classList.add('selected','correct');
                resultText.textContent = '정답입니다!';
                resultText.className = 'text-xl font-bold mb-2 text-green-600';
                score++;
            } else {
                clickedButton.classList.add('selected','incorrect');
                const correctButton = optionsContainer.querySelector(
                    `[data-option-index="${questionData.answer - 1}"]`
                );
                if (correctButton) correctButton.classList.add('reveal-correct');
                resultText.textContent = '오답입니다.';
                resultText.className = 'text-xl font-bold mb-2 text-red-600';
            }

            explanationBox.classList.remove('hidden');
            updateScoreboard();
        }

        // --- 점수판 ---
        function updateScoreboard() {
            scoreText.textContent = `${score} / ${totalQuestions}`;
        }

        // --- 전체 정답 공개 ---
        function revealAllAnswers() {
            quizData.forEach(q => {
                if (answeredQuestions.has(q.id)) return;
                answeredQuestions.add(q.id);

                const parentCard = document.getElementById(`card-Q${q.id}`);
                if (!parentCard) return;

                const optionsContainer = parentCard.querySelector('.options-container');
                if (!optionsContainer) return;

                const allOptionButtons = optionsContainer.querySelectorAll('.option-button');
                const explanationBox = parentCard.querySelector(`#explanation-Q${q.id}`);
                const resultText = parentCard.querySelector(`#result-Q${q.id}`);
                if (!explanationBox || !resultText) return;

                allOptionButtons.forEach(btn => { btn.disabled = true; });

                const correctButton = optionsContainer.querySelector(
                    `[data-option-index="${q.answer - 1}"]`
                );
                if (correctButton) correctButton.classList.add('reveal-correct');

                resultText.textContent = '정답 및 해설';
                resultText.className = 'text-xl font-bold mb-2 text-blue-600';
                explanationBox.classList.remove('hidden');
            });
        }

        // --- 이벤트 리스너 ---
        document.addEventListener('DOMContentLoaded', renderQuiz);
        quizContainer.addEventListener('click', handleAnswerClick);
        resetButton.addEventListener('click', renderQuiz);
        revealButton.addEventListener('click', revealAllAnswers);
    </script>
</body>
</html>
